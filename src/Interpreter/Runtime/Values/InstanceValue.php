<?php

namespace src\Interpreter\Runtime\Values;

use src\AST\Expressions\Expression;
use src\AST\Statements\Statement;
use src\Interpreter\Runtime\LoxType;

class InstanceValue extends BaseValue
{

    public function __construct(
        private readonly ClassValue $class)
    {
    }

    public function getType(): LoxType
    {
        return LoxType::Instance;
    }

    public function cast(LoxType $toType, Expression|Statement $cause): BaseValue
    {
        if ($toType == LoxType::String) {
// TODO: add reference to file / line?
            $name = $this->class->getName() ?? "anonymous";
            return new StringValue("<instance of {$name}>");
        }

        return parent::cast($toType, $cause); // TODO: Change the autogenerated stub
    }


}